<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>발송관리</title>
    <!-- 부모 페이지의 스타일 상속 -->
    <style>
        /* 발송관리 전용 스타일 */
        .shipping-container {
            padding: 20px;
        }
        
        .shipping-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .shipping-filters {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .status-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .status-card {
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
        }
        
        .status-card.ready { border-left: 4px solid #2563eb; }
        .status-card.processing { border-left: 4px solid #f59e0b; }
        .status-card.completed { border-left: 4px solid #10b981; }
        .status-card.delayed { border-left: 4px solid #ef4444; }
        
        .batch-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: #e7f3ff;
            border-radius: 8px;
        }
        
        .shipping-table-container {
            overflow-x: auto;
            border: 1px solid #dee2e6;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="shipping-container">
        <!-- 발송관리 헤더 -->
        <div class="section-container">
            <h2 class="section-title">
                <div class="section-title-text">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
                        <rect x="1" y="3" width="15" height="13" rx="2" ry="2"></rect>
                        <path d="M16 8h4a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H6"></path>
                        <path d="M16 12h6"></path>
                        <circle cx="6" cy="20" r="2"></circle>
                        <circle cx="18" cy="20" r="2"></circle>
                    </svg>
                    발송 현황
                </div>
            </h2>
            
            <!-- 발송 상태 요약 -->
            <div class="status-summary">
                <div class="status-card ready">
                    <div class="summary-label">발송대기</div>
                    <div class="summary-value" style="color: #2563eb;">0건</div>
                </div>
                <div class="status-card processing">
                    <div class="summary-label">발송처리중</div>
                    <div class="summary-value" style="color: #f59e0b;">0건</div>
                </div>
                <div class="status-card completed">
                    <div class="summary-label">발송완료</div>
                    <div class="summary-value" style="color: #10b981;">0건</div>
                </div>
                <div class="status-card delayed">
                    <div class="summary-label">발송지연</div>
                    <div class="summary-value" style="color: #ef4444;">0건</div>
                </div>
            </div>
        </div>
        
        <!-- 필터 섹션 -->
        <div class="section-container">
            <h2 class="section-title">
                <div class="section-title-text">
                    발송 관리
                </div>
            </h2>
            
            <div class="shipping-filters">
                <div class="filter-group">
                    <label>기간:</label>
                    <input type="date" id="shipDateFrom" class="form-input-direct" style="width: 140px;">
                    <span>~</span>
                    <input type="date" id="shipDateTo" class="form-input-direct" style="width: 140px;">
                </div>
                
                <div class="filter-group">
                    <label>마켓:</label>
                    <select id="shipMarket" class="form-input-direct" style="width: 150px;">
                        <option value="">전체</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>발송상태:</label>
                    <select id="shipStatus" class="form-input-direct" style="width: 120px;">
                        <option value="">전체</option>
                        <option value="ready">발송대기</option>
                        <option value="processing">처리중</option>
                        <option value="completed">발송완료</option>
                        <option value="delayed">지연</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>택배사:</label>
                    <select id="shipCarrier" class="form-input-direct" style="width: 120px;">
                        <option value="">전체</option>
                        <option value="CJ대한통운">CJ대한통운</option>
                        <option value="한진택배">한진택배</option>
                        <option value="롯데택배">롯데택배</option>
                        <option value="우체국택배">우체국택배</option>
                        <option value="로젠택배">로젠택배</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>검색:</label>
                    <input type="text" id="shipSearch" class="form-input-direct" style="width: 200px;" placeholder="주문번호, 수령인, 송장번호">
                </div>
                
                <button class="btn-verify" onclick="ShippingModule.searchOrders()">검색</button>
                <button class="btn-reset" onclick="ShippingModule.resetFilters()">초기화</button>
            </div>
            
            <!-- 일괄 처리 액션 -->
            <div class="batch-actions">
                <input type="checkbox" id="selectAll" onchange="ShippingModule.toggleSelectAll()">
                <label for="selectAll">전체선택</label>
                
                <button class="btn-verify" onclick="ShippingModule.batchUpdateInvoice()">
                    송장번호 일괄등록
                </button>
                
                <button class="btn-verify" onclick="ShippingModule.exportSelected()">
                    선택항목 엑셀다운
                </button>
                
                <button class="btn-verify" onclick="ShippingModule.printLabels()">
                    운송장 출력
                </button>
                
                <button class="export-btn export-sheets" onclick="ShippingModule.updateToSheets()">
                    구글시트 업데이트
                </button>
            </div>
        </div>
        
        <!-- 발송 목록 테이블 -->
        <div class="section-container">
            <div class="shipping-table-container">
                <table class="order-table" id="shippingTable">
                    <thead>
                        <tr>
                            <th style="width: 40px;">
                                <input type="checkbox" id="headerCheckbox">
                            </th>
                            <th style="width: 60px;">상태</th>
                            <th style="width: 100px;">마켓명</th>
                            <th style="width: 100px;">주문일</th>
                            <th style="width: 140px;">주문번호</th>
                            <th style="width: 80px;">주문자</th>
                            <th style="width: 80px;">수령인</th>
                            <th style="width: 120px;">연락처</th>
                            <th style="width: 200px;">배송지</th>
                            <th style="width: 150px;">상품명</th>
                            <th style="width: 60px;">수량</th>
                            <th style="width: 100px;">택배사</th>
                            <th style="width: 140px;">송장번호</th>
                            <th style="width: 100px;">발송일</th>
                            <th style="width: 100px;">관리</th>
                        </tr>
                    </thead>
                    <tbody id="shippingTableBody">
                        <tr>
                            <td colspan="15" class="text-center">데이터를 불러오는 중...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- 페이지네이션 -->
            <div class="pagination" style="margin-top: 20px; text-align: center;">
                <button class="btn-verify" onclick="ShippingModule.prevPage()">이전</button>
                <span id="pageInfo">1 / 1</span>
                <button class="btn-verify" onclick="ShippingModule.nextPage()">다음</button>
            </div>
        </div>
    </div>
    
    <!-- 송장번호 일괄등록 모달 -->
    <div id="invoiceModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>송장번호 일괄등록</h3>
            <div class="form-group">
                <label>택배사 선택:</label>
                <select id="modalCarrier" class="form-input-direct">
                    <option value="CJ대한통운">CJ대한통운</option>
                    <option value="한진택배">한진택배</option>
                    <option value="롯데택배">롯데택배</option>
                    <option value="우체국택배">우체국택배</option>
                </select>
            </div>
            <div class="form-group">
                <label>송장번호 입력 (엔터로 구분):</label>
                <textarea id="modalInvoices" class="form-input-direct" rows="10" 
                    placeholder="송장번호를 한 줄에 하나씩 입력하세요"></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn-verify" onclick="ShippingModule.applyInvoices()">적용</button>
                <button class="btn-reset" onclick="ShippingModule.closeModal()">취소</button>
            </div>
        </div>
    </div>
    
    <script>
        // 발송관리 모듈 초기화
        const ShippingModule = {
            currentPage: 1,
            totalPages: 1,
            selectedOrders: new Set(),
            
            init: function() {
                this.loadOrders();
                this.setupEventListeners();
            },
            
            loadOrders: async function() {
                // 주문 데이터 로드 로직
                console.log('Loading shipping orders...');
            },
            
            searchOrders: function() {
                console.log('Searching orders...');
            },
            
            resetFilters: function() {
                document.getElementById('shipDateFrom').value = '';
                document.getElementById('shipDateTo').value = '';
                document.getElementById('shipMarket').value = '';
                document.getElementById('shipStatus').value = '';
                document.getElementById('shipCarrier').value = '';
                document.getElementById('shipSearch').value = '';
                this.loadOrders();
            },
            
            toggleSelectAll: function() {
                const selectAll = document.getElementById('selectAll').checked;
                const checkboxes = document.querySelectorAll('#shippingTableBody input[type="checkbox"]');
                checkboxes.forEach(cb => cb.checked = selectAll);
            },
            
            batchUpdateInvoice: function() {
                document.getElementById('invoiceModal').style.display = 'block';
            },
            
            closeModal: function() {
                document.getElementById('invoiceModal').style.display = 'none';
            },
            
            applyInvoices: function() {
                const carrier = document.getElementById('modalCarrier').value;
                const invoices = document.getElementById('modalInvoices').value.split('\n').filter(n => n.trim());
                console.log('Applying invoices:', carrier, invoices);
                this.closeModal();
            },
            
            exportSelected: function() {
                console.log('Exporting selected orders...');
            },
            
            printLabels: function() {
                console.log('Printing shipping labels...');
            },
            
            updateToSheets: function() {
                console.log('Updating to Google Sheets...');
            },
            
            prevPage: function() {
                if (this.currentPage > 1) {
                    this.currentPage--;
                    this.loadOrders();
                }
            },
            
            nextPage: function() {
                if (this.currentPage < this.totalPages) {
                    this.currentPage++;
                    this.loadOrders();
                }
            },
            
            setupEventListeners: function() {
                // 이벤트 리스너 설정
            }
        };
        
        // 모듈 초기화
        ShippingModule.init();
    </script>
</body>
</html>
